<div class="min-h-screen bg-gray-50 font-body">
    <div class="max-w-7xl mx-auto px-4 py-8">

        <!-- üßç Perfil admin -->
        <div class="bg-white rounded-lg shadow-sm p-6 mb-8 flex flex-col lg:flex-row items-start justify-between gap-6">
            <div class="flex flex-col sm:flex-row items-center sm:items-start gap-6">
                <div class="w-32 h-32 rounded-full bg-gray-200 overflow-hidden">
                    <img [src]="usuario()?.imagen_url || '/assets/images/placeholder-product.png'"
                        [alt]="usuario()?.nombre || 'Administrador'" class="w-full h-full object-cover" />
                </div>

                <div class="text-center sm:text-left">
                    <h2 class="text-3xl font-display text-gray-900 mb-2">
                        {{ usuario()?.nombre }}
                    </h2>

                    <p class="text-gray-600 mb-3 text-lg">
                        {{ usuario()?.email }}
                    </p>

                    <span class="inline-block bg-secondary text-white text-sm px-4 py-2 rounded-full font-medium">
                        Rol: Administrador
                    </span>
                </div>
            </div>

            <!-- Botones Crear -->
            <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 flex flex-col gap-3">
                <app-button (click)="crearProducto()" class="btn-yellow">
                    Crear producto
                </app-button>
                <app-button (click)="crearPaquete()" class="btn-yellow">
                    Crear paquete
                </app-button>
            </div>
        </div>

        <!-- üîß Paneles de administraci√≥n -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8">
            <app-button variant="tertiary" (click)="navigateToAdminProducts()" class="btn-secondary">Administrar productos</app-button>
            <!-- <app-button variant="tertiary" (click)="navigateToAdminUsers()" class="btn-secondary">Administrar usuarios</app-button> -->
            <!-- <app-button variant="tertiary" (click)="navigateToMetrics()" class="btn-secondary">Ver m√©tricas</app-button> -->
            <!-- <app-button variant="tertiary" (click)="navigateToAdminPackages()" class="btn-secondary">Administrar paquetes</app-button> -->
            <app-button variant="tertiary" (click)="navigateToAdminPostPackages()" class="btn-secondary">Publicar paquete</app-button>
            <app-button variant="tertiary" (click)="navigateToAdminTemplates()" class="btn-secondary">Administrar plantillas</app-button>
        </div>

        <!-- üì¶ Paquetes -->
        <div class="bg-white rounded-lg shadow-sm p-6">
            <h3 class="text-2xl font-display text-gray-900 mb-8 text-center">
                Paquetes por cerrar / pendientes
            </h3>

            @if (loading()) {
            <div class="text-center text-gray-500">Cargando paquetes...</div>
            } @else if (error()) {
            <div class="text-center text-red-600">{{ error() }}</div>
            } @else if (paquetes().length > 0) {
            <div class="space-y-4">
                @for (paquete of paquetes(); track paquete.id_paquete_publicado) {
                <div
                    class="border-2 border-gray-300 rounded-xl p-6 hover:shadow-md transition-transform hover:scale-[1.01]">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-6">
                            <div
                                class="w-16 h-16 bg-gray-200 rounded-lg overflow-hidden flex items-center justify-center">
                                @if (paquete.imagen_url) {
                                <img [src]="paquete.imagen_url" [alt]="paquete.paqueteBase?.nombre"
                                    class="w-full h-full object-cover" />
                                } @else {
                                <svg class="w-8 h-8 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
                                    <path
                                        d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
                                </svg>
                                }
                            </div>
                            <div>
                                <h4 class="text-xl font-display text-gray-900 mb-2">
                                    {{ paquete.paqueteBase?.nombre }}
                                </h4>
                                <div class="flex items-center gap-6 text-sm">
                                    <p [class]="getStatusColor(paquete.estado)">
                                        {{ paquete.estado }}
                                    </p>
                                    <span class="text-gray-700">{{
                                        paquete.paqueteBase?.categoria_id
                                        }}</span>
                                    <span class="text-gray-700">
                                        {{ paquete.cant_productos }} /
                                        {{ paquete.cant_productos_reservados }}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <app-button variant="primary" (click)="editPackage(paquete)"
                            class="text-gray-400 hover:text-gray-700 p-3 rounded-lg hover:bg-gray-50 transition-colors"
                            title="Editar paquete">
                            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24">
                                <path fill="currentColor"
                                    d="M21.808 5.456a1.9 1.9 0 0 0-.46-.68l-2.15-2.15a1.9 1.9 0 0 0-.68-.46a2.1 2.1 0 0 0-2.31.46l-1.71 1.71v.05l-7.74 7.73a2.1 2.1 0 0 0-.61 1.48v2.17a2.12 2.12 0 0 0 2.11 2.11h2.17a2.07 2.07 0 0 0 1.48-.62l7.74-7.74l1.72-1.72c.202-.19.36-.422.46-.68a2 2 0 0 0 0-1.63z" />
                            </svg>
                        </app-button>
                    </div>
                </div>
                }
            </div>
            } @else {
            <div class="text-center py-12 text-gray-500">
                No hay paquetes pendientes.
            </div>
            }
        </div>
    </div>
</div>